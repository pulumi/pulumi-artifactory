// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as utilities from "./utilities";

/**
 * Creates a virtual Hex repository that aggregates local and remote Hex repositories.
 *
 * Official documentation can be found [here](https://www.jfrog.com/confluence/display/JFROG/Hex+Registry#HexRegistry-VirtualRepositories).
 *
 * ## Example Usage
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as artifactory from "@pulumi/artifactory";
 * import * as std from "@pulumi/std";
 *
 * const some_keypairRSA = new artifactory.Keypair("some-keypairRSA", {
 *     pairName: `some-keypair${randid.id}`,
 *     pairType: "RSA",
 *     alias: "foo-alias",
 *     privateKey: std.file({
 *         input: "samples/rsa.priv",
 *     }).then(invoke => invoke.result),
 *     publicKey: std.file({
 *         input: "samples/rsa.pub",
 *     }).then(invoke => invoke.result),
 * });
 * const local_hex = new artifactory.LocalHexRepository("local-hex", {
 *     key: "local-hex",
 *     hexPrimaryKeypairRef: some_keypairRSA.pairName,
 * });
 * const remote_hex = new artifactory.RemoteHexRepository("remote-hex", {
 *     key: "remote-hex",
 *     url: "https://repo.hex.pm",
 *     hexPrimaryKeypairRef: some_keypairRSA.pairName,
 *     publicKey: std.file({
 *         input: "samples/rsa.pub",
 *     }).then(invoke => invoke.result),
 * });
 * const my_virtual_hex = new artifactory.VirtualHexRepository("my-virtual-hex", {
 *     key: "my-virtual-hex",
 *     hexPrimaryKeypairRef: some_keypairRSA.pairName,
 *     repositories: [
 *         local_hex.key,
 *         remote_hex.key,
 *     ],
 *     description: "Virtual Hex repository aggregating local and remote",
 *     notes: "Internal repository",
 * }, {
 *     dependsOn: [
 *         some_keypairRSA,
 *         local_hex,
 *         remote_hex,
 *     ],
 * });
 * ```
 *
 * ## Import
 *
 * Virtual repositories can be imported using their name, e.g.
 * ```sh
 * $ pulumi import artifactory:index/virtualHexRepository:VirtualHexRepository my-virtual-hex my-virtual-hex
 * ```
 */
export class VirtualHexRepository extends pulumi.CustomResource {
    /**
     * Get an existing VirtualHexRepository resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: VirtualHexRepositoryState, opts?: pulumi.CustomResourceOptions): VirtualHexRepository {
        return new VirtualHexRepository(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'artifactory:index/virtualHexRepository:VirtualHexRepository';

    /**
     * Returns true if the given object is an instance of VirtualHexRepository.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is VirtualHexRepository {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === VirtualHexRepository.__pulumiType;
    }

    /**
     * Whether the virtual repository should search through remote repositories when trying to resolve an artifact requested by another Artifactory instance.
     */
    declare public readonly artifactoryRequestsCanRetrieveRemoteArtifacts: pulumi.Output<boolean>;
    /**
     * Default repository to deploy artifacts.
     */
    declare public readonly defaultDeploymentRepo: pulumi.Output<string>;
    /**
     * Public description.
     */
    declare public readonly description: pulumi.Output<string>;
    /**
     * List of artifact patterns to exclude when evaluating artifact requests, in the form of `x/y/**&#47;z/*`.By default no artifacts are excluded.
     */
    declare public readonly excludesPattern: pulumi.Output<string>;
    /**
     * Select the RSA key pair to sign and encrypt content for secure communication between Artifactory and the Mix client.
     */
    declare public readonly hexPrimaryKeypairRef: pulumi.Output<string>;
    /**
     * List of comma-separated artifact patterns to include when evaluating artifact requests in the form of `x/y/**&#47;z/*`. When used, only artifacts matching one of the include patterns are served. By default, all artifacts are included (`**&#47;*`).
     */
    declare public readonly includesPattern: pulumi.Output<string>;
    /**
     * A mandatory identifier for the repository that must be unique. It cannot begin with a number or contain spaces or special characters.
     */
    declare public readonly key: pulumi.Output<string>;
    /**
     * Artifactory REST API call Get Key Pair doesn't return keys `privateKey` and `passphrase`, but consumes these keys in the POST call.
     *
     * The meta-argument `lifecycle` used here to make Provider ignore the changes for these two keys in the Terraform state.
     */
    declare public readonly notes: pulumi.Output<string>;
    /**
     * Before Artifactory 7.53.1, up to 2 values (`DEV` and `PROD`) are allowed. From 7.53.1 to 7.107.1, only one value is allowed. From 7.107.1, multiple values are allowed.The attribute should only be used if the repository is already assigned to the existing project. If not, the attribute will be ignored by Artifactory, but will remain in the Terraform state, which will create state drift during the update.
     */
    declare public readonly projectEnvironments: pulumi.Output<string[]>;
    /**
     * Project key for assigning this repository to. Must be 2 - 32 lowercase alphanumeric and hyphen characters. When assigning repository to a project, repository key must be prefixed with project key, separated by a dash.
     */
    declare public readonly projectKey: pulumi.Output<string>;
    /**
     * Sets the layout that the repository should use for storing and identifying modules. A recommended layout that corresponds to the package type defined is suggested, and index packages uploaded and calculate metadata accordingly.
     */
    declare public readonly repoLayoutRef: pulumi.Output<string>;
    /**
     * The effective list of actual repositories included in this virtual repository.
     */
    declare public readonly repositories: pulumi.Output<string[]>;

    /**
     * Create a VirtualHexRepository resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: VirtualHexRepositoryArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: VirtualHexRepositoryArgs | VirtualHexRepositoryState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as VirtualHexRepositoryState | undefined;
            resourceInputs["artifactoryRequestsCanRetrieveRemoteArtifacts"] = state?.artifactoryRequestsCanRetrieveRemoteArtifacts;
            resourceInputs["defaultDeploymentRepo"] = state?.defaultDeploymentRepo;
            resourceInputs["description"] = state?.description;
            resourceInputs["excludesPattern"] = state?.excludesPattern;
            resourceInputs["hexPrimaryKeypairRef"] = state?.hexPrimaryKeypairRef;
            resourceInputs["includesPattern"] = state?.includesPattern;
            resourceInputs["key"] = state?.key;
            resourceInputs["notes"] = state?.notes;
            resourceInputs["projectEnvironments"] = state?.projectEnvironments;
            resourceInputs["projectKey"] = state?.projectKey;
            resourceInputs["repoLayoutRef"] = state?.repoLayoutRef;
            resourceInputs["repositories"] = state?.repositories;
        } else {
            const args = argsOrState as VirtualHexRepositoryArgs | undefined;
            if (args?.hexPrimaryKeypairRef === undefined && !opts.urn) {
                throw new Error("Missing required property 'hexPrimaryKeypairRef'");
            }
            if (args?.key === undefined && !opts.urn) {
                throw new Error("Missing required property 'key'");
            }
            resourceInputs["artifactoryRequestsCanRetrieveRemoteArtifacts"] = args?.artifactoryRequestsCanRetrieveRemoteArtifacts;
            resourceInputs["defaultDeploymentRepo"] = args?.defaultDeploymentRepo;
            resourceInputs["description"] = args?.description;
            resourceInputs["excludesPattern"] = args?.excludesPattern;
            resourceInputs["hexPrimaryKeypairRef"] = args?.hexPrimaryKeypairRef;
            resourceInputs["includesPattern"] = args?.includesPattern;
            resourceInputs["key"] = args?.key;
            resourceInputs["notes"] = args?.notes;
            resourceInputs["projectEnvironments"] = args?.projectEnvironments;
            resourceInputs["projectKey"] = args?.projectKey;
            resourceInputs["repoLayoutRef"] = args?.repoLayoutRef;
            resourceInputs["repositories"] = args?.repositories;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(VirtualHexRepository.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering VirtualHexRepository resources.
 */
export interface VirtualHexRepositoryState {
    /**
     * Whether the virtual repository should search through remote repositories when trying to resolve an artifact requested by another Artifactory instance.
     */
    artifactoryRequestsCanRetrieveRemoteArtifacts?: pulumi.Input<boolean>;
    /**
     * Default repository to deploy artifacts.
     */
    defaultDeploymentRepo?: pulumi.Input<string>;
    /**
     * Public description.
     */
    description?: pulumi.Input<string>;
    /**
     * List of artifact patterns to exclude when evaluating artifact requests, in the form of `x/y/**&#47;z/*`.By default no artifacts are excluded.
     */
    excludesPattern?: pulumi.Input<string>;
    /**
     * Select the RSA key pair to sign and encrypt content for secure communication between Artifactory and the Mix client.
     */
    hexPrimaryKeypairRef?: pulumi.Input<string>;
    /**
     * List of comma-separated artifact patterns to include when evaluating artifact requests in the form of `x/y/**&#47;z/*`. When used, only artifacts matching one of the include patterns are served. By default, all artifacts are included (`**&#47;*`).
     */
    includesPattern?: pulumi.Input<string>;
    /**
     * A mandatory identifier for the repository that must be unique. It cannot begin with a number or contain spaces or special characters.
     */
    key?: pulumi.Input<string>;
    /**
     * Artifactory REST API call Get Key Pair doesn't return keys `privateKey` and `passphrase`, but consumes these keys in the POST call.
     *
     * The meta-argument `lifecycle` used here to make Provider ignore the changes for these two keys in the Terraform state.
     */
    notes?: pulumi.Input<string>;
    /**
     * Before Artifactory 7.53.1, up to 2 values (`DEV` and `PROD`) are allowed. From 7.53.1 to 7.107.1, only one value is allowed. From 7.107.1, multiple values are allowed.The attribute should only be used if the repository is already assigned to the existing project. If not, the attribute will be ignored by Artifactory, but will remain in the Terraform state, which will create state drift during the update.
     */
    projectEnvironments?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Project key for assigning this repository to. Must be 2 - 32 lowercase alphanumeric and hyphen characters. When assigning repository to a project, repository key must be prefixed with project key, separated by a dash.
     */
    projectKey?: pulumi.Input<string>;
    /**
     * Sets the layout that the repository should use for storing and identifying modules. A recommended layout that corresponds to the package type defined is suggested, and index packages uploaded and calculate metadata accordingly.
     */
    repoLayoutRef?: pulumi.Input<string>;
    /**
     * The effective list of actual repositories included in this virtual repository.
     */
    repositories?: pulumi.Input<pulumi.Input<string>[]>;
}

/**
 * The set of arguments for constructing a VirtualHexRepository resource.
 */
export interface VirtualHexRepositoryArgs {
    /**
     * Whether the virtual repository should search through remote repositories when trying to resolve an artifact requested by another Artifactory instance.
     */
    artifactoryRequestsCanRetrieveRemoteArtifacts?: pulumi.Input<boolean>;
    /**
     * Default repository to deploy artifacts.
     */
    defaultDeploymentRepo?: pulumi.Input<string>;
    /**
     * Public description.
     */
    description?: pulumi.Input<string>;
    /**
     * List of artifact patterns to exclude when evaluating artifact requests, in the form of `x/y/**&#47;z/*`.By default no artifacts are excluded.
     */
    excludesPattern?: pulumi.Input<string>;
    /**
     * Select the RSA key pair to sign and encrypt content for secure communication between Artifactory and the Mix client.
     */
    hexPrimaryKeypairRef: pulumi.Input<string>;
    /**
     * List of comma-separated artifact patterns to include when evaluating artifact requests in the form of `x/y/**&#47;z/*`. When used, only artifacts matching one of the include patterns are served. By default, all artifacts are included (`**&#47;*`).
     */
    includesPattern?: pulumi.Input<string>;
    /**
     * A mandatory identifier for the repository that must be unique. It cannot begin with a number or contain spaces or special characters.
     */
    key: pulumi.Input<string>;
    /**
     * Artifactory REST API call Get Key Pair doesn't return keys `privateKey` and `passphrase`, but consumes these keys in the POST call.
     *
     * The meta-argument `lifecycle` used here to make Provider ignore the changes for these two keys in the Terraform state.
     */
    notes?: pulumi.Input<string>;
    /**
     * Before Artifactory 7.53.1, up to 2 values (`DEV` and `PROD`) are allowed. From 7.53.1 to 7.107.1, only one value is allowed. From 7.107.1, multiple values are allowed.The attribute should only be used if the repository is already assigned to the existing project. If not, the attribute will be ignored by Artifactory, but will remain in the Terraform state, which will create state drift during the update.
     */
    projectEnvironments?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Project key for assigning this repository to. Must be 2 - 32 lowercase alphanumeric and hyphen characters. When assigning repository to a project, repository key must be prefixed with project key, separated by a dash.
     */
    projectKey?: pulumi.Input<string>;
    /**
     * Sets the layout that the repository should use for storing and identifying modules. A recommended layout that corresponds to the package type defined is suggested, and index packages uploaded and calculate metadata accordingly.
     */
    repoLayoutRef?: pulumi.Input<string>;
    /**
     * The effective list of actual repositories included in this virtual repository.
     */
    repositories?: pulumi.Input<pulumi.Input<string>[]>;
}
